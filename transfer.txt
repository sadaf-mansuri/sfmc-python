import os
from bs4 import BeautifulSoup

# Define input and output directories
incoming_dir = "path/to/incoming"
output_dir = "path/to/output"

# Ensure the output directory exists
os.makedirs(output_dir, exist_ok=True)

# Loop through all files in the incoming directory
for filename in os.listdir(incoming_dir):
    # Construct the full file path
    input_file_path = os.path.join(incoming_dir, filename)
    
    # Check if it is a file (not a directory)
    if os.path.isfile(input_file_path):
        # Read the HTML content
        with open(input_file_path, "r", encoding="utf-8") as file:
            html_content = file.read()
        
        # Parse and prettify the HTML
        soup = BeautifulSoup(html_content, "html.parser")
        pretty_html = soup.prettify()
        
        # Define the output file path
        output_file_path = os.path.join(output_dir, f"processed_{filename}")
        
        # Write the prettified HTML to the output file
        with open(output_file_path, "w", encoding="utf-8") as file:
            file.write(pretty_html)
        
        print(f"Processed and saved: {output_file_path}")
